<!DOCTYPE html>
<html class="layout-pf">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ARA |Â Ansible Run Analysis records Ansible playbook runs seamlessly to make them easier to visualize, understand and troubleshoot">
    <title>ARA | Ansible Run Analysis</title>
    <script src="../../static/packaged/jquery/jquery.min.js"></script>
    <script src="../../static/packaged/datatables/js/jquery.dataTables.min.js"></script>
    <script src="../../static/packaged/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../static/packaged/patternfly_bootstrap_treeview/js/bootstrap-treeview.min.js"></script>
    <script src="../../static/packaged/patternfly/js/patternfly.min.js"></script>
    <script src="../../static/js/ara.js"></script>
    <link href="../../static/packaged/patternfly/css/patternfly.min.css" rel="stylesheet">
    <link href="../../static/packaged/patternfly/css/patternfly-additions.min.css" rel="stylesheet">
    <link href="../../static/packaged/patternfly_bootstrap_treeview/css/bootstrap-treeview.min.css" rel="stylesheet">
    <link href="../../static/css/pygments.css" rel="stylesheet">
    <link href="../../static/css/ara.css" rel="stylesheet">
    <link rel="shortcut icon" href="../../static/images/favicon.ico">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
          <h2>File: <strong>/home/travis/build/robertdebock/ansible-role-bootstrap/molecule/debian-buster/create.yml</strong></h2>
          <p>Last updated: 2018-04-04 16:40:11</p>
          <p>Ansible version: <strong>2.5.0</strong></p>
          <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#line-1"> 1</a>
<a href="#line-2"> 2</a>
<a href="#line-3"> 3</a>
<a href="#line-4"> 4</a>
<a href="#line-5"> 5</a>
<a href="#line-6"> 6</a>
<a href="#line-7"> 7</a>
<a href="#line-8"> 8</a>
<a href="#line-9"> 9</a>
<a href="#line-10">10</a>
<a href="#line-11">11</a>
<a href="#line-12">12</a>
<a href="#line-13">13</a>
<a href="#line-14">14</a>
<a href="#line-15">15</a>
<a href="#line-16">16</a>
<a href="#line-17">17</a>
<a href="#line-18">18</a>
<a href="#line-19">19</a>
<a href="#line-20">20</a>
<a href="#line-21">21</a>
<a href="#line-22">22</a>
<a href="#line-23">23</a>
<a href="#line-24">24</a>
<a href="#line-25">25</a>
<a href="#line-26">26</a>
<a href="#line-27">27</a>
<a href="#line-28">28</a>
<a href="#line-29">29</a>
<a href="#line-30">30</a>
<a href="#line-31">31</a>
<a href="#line-32">32</a>
<a href="#line-33">33</a>
<a href="#line-34">34</a>
<a href="#line-35">35</a>
<a href="#line-36">36</a>
<a href="#line-37">37</a>
<a href="#line-38">38</a>
<a href="#line-39">39</a>
<a href="#line-40">40</a>
<a href="#line-41">41</a>
<a href="#line-42">42</a>
<a href="#line-43">43</a>
<a href="#line-44">44</a>
<a href="#line-45">45</a>
<a href="#line-46">46</a>
<a href="#line-47">47</a></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span id="line-1"><a name="line-1"></a><span class="nn">---</span>
</span><span id="line-2"><a name="line-2"></a><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Create</span>
</span><span id="line-3"><a name="line-3"></a>  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
</span><span id="line-4"><a name="line-4"></a>  <span class="l l-Scalar l-Scalar-Plain">connection</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">local</span>
</span><span id="line-5"><a name="line-5"></a>  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="line-6"><a name="line-6"></a>  <span class="l l-Scalar l-Scalar-Plain">no_log</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">lookup(&#39;env&#39;,</span><span class="nv"> </span><span class="s">&#39;MOLECULE_DEBUG&#39;)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">bool</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-7"><a name="line-7"></a>  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
</span><span id="line-8"><a name="line-8"></a>    <span class="l l-Scalar l-Scalar-Plain">molecule_file</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;env&#39;,</span><span class="nv"> </span><span class="s">&#39;MOLECULE_FILE&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-9"><a name="line-9"></a>    <span class="l l-Scalar l-Scalar-Plain">molecule_ephemeral_directory</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;env&#39;,</span><span class="nv"> </span><span class="s">&#39;MOLECULE_EPHEMERAL_DIRECTORY&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-10"><a name="line-10"></a>    <span class="l l-Scalar l-Scalar-Plain">molecule_scenario_directory</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;env&#39;,</span><span class="nv"> </span><span class="s">&#39;MOLECULE_SCENARIO_DIRECTORY&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-11"><a name="line-11"></a>    <span class="l l-Scalar l-Scalar-Plain">molecule_yml</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;file&#39;,</span><span class="nv"> </span><span class="s">molecule_file)</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">molecule_from_yaml</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-12"><a name="line-12"></a>  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
</span><span id="line-13"><a name="line-13"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Create Dockerfiles from image names</span>
</span><span id="line-14"><a name="line-14"></a>      <span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span>
</span><span id="line-15"><a name="line-15"></a>        <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">molecule_scenario_directory</span><span class="nv"> </span><span class="s">}}/Dockerfile.j2&quot;</span>
</span><span id="line-16"><a name="line-16"></a>        <span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">molecule_ephemeral_directory</span><span class="nv"> </span><span class="s">}}/Dockerfile_{{</span><span class="nv"> </span><span class="s">item.image</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">regex_replace(&#39;[^a-zA-Z0-9_]&#39;,</span><span class="nv"> </span><span class="s">&#39;_&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-17"><a name="line-17"></a>      <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">molecule_yml.platforms</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-18"><a name="line-18"></a>      <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">platforms</span>
</span><span id="line-19"><a name="line-19"></a>
</span><span id="line-20"><a name="line-20"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Discover local Docker images</span>
</span><span id="line-21"><a name="line-21"></a>      <span class="l l-Scalar l-Scalar-Plain">docker_image_facts</span><span class="p p-Indicator">:</span>
</span><span id="line-22"><a name="line-22"></a>        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;molecule_local/{{</span><span class="nv"> </span><span class="s">item.item.name</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-23"><a name="line-23"></a>      <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">platforms.results</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-24"><a name="line-24"></a>      <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">docker_images</span>
</span><span id="line-25"><a name="line-25"></a>
</span><span id="line-26"><a name="line-26"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Build an Ansible compatible image</span>
</span><span id="line-27"><a name="line-27"></a>      <span class="l l-Scalar l-Scalar-Plain">docker_image</span><span class="p p-Indicator">:</span>
</span><span id="line-28"><a name="line-28"></a>        <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">molecule_ephemeral_directory</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-29"><a name="line-29"></a>        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;molecule_local/{{</span><span class="nv"> </span><span class="s">item.item.image</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-30"><a name="line-30"></a>        <span class="l l-Scalar l-Scalar-Plain">dockerfile</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.item.dockerfile</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(item.invocation.module_args.dest)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-31"><a name="line-31"></a>        <span class="l l-Scalar l-Scalar-Plain">force</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.item.force</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(True)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-32"><a name="line-32"></a>      <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">platforms.results</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-33"><a name="line-33"></a>      <span class="l l-Scalar l-Scalar-Plain">when</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">platforms.changed or docker_images.results | map(attribute=&#39;images&#39;) | select(&#39;equalto&#39;, []) | list | count &gt;= 0</span>
</span><span id="line-34"><a name="line-34"></a>
</span><span id="line-35"><a name="line-35"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Create molecule instance(s)</span>
</span><span id="line-36"><a name="line-36"></a>      <span class="l l-Scalar l-Scalar-Plain">docker_container</span><span class="p p-Indicator">:</span>
</span><span id="line-37"><a name="line-37"></a>        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.name</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-38"><a name="line-38"></a>        <span class="l l-Scalar l-Scalar-Plain">hostname</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.name</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-39"><a name="line-39"></a>        <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="s">&quot;molecule_local/{{</span><span class="nv"> </span><span class="s">item.image</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-40"><a name="line-40"></a>        <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">started</span>
</span><span id="line-41"><a name="line-41"></a>        <span class="l l-Scalar l-Scalar-Plain">recreate</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="line-42"><a name="line-42"></a>        <span class="l l-Scalar l-Scalar-Plain">log_driver</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">json-file</span>
</span><span id="line-43"><a name="line-43"></a>        <span class="l l-Scalar l-Scalar-Plain">command</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.command</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(&#39;sh</span><span class="nv"> </span><span class="s">-c</span><span class="nv"> </span><span class="s">\&quot;while</span><span class="nv"> </span><span class="s">true;</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">10000;</span><span class="nv"> </span><span class="s">done\&quot;&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-44"><a name="line-44"></a>        <span class="l l-Scalar l-Scalar-Plain">privileged</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.privileged</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-45"><a name="line-45"></a>        <span class="l l-Scalar l-Scalar-Plain">volumes</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.volumes</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-46"><a name="line-46"></a>        <span class="l l-Scalar l-Scalar-Plain">capabilities</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.capabilities</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="line-47"><a name="line-47"></a>      <span class="l l-Scalar l-Scalar-Plain">with_items</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">molecule_yml.platforms</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></pre></div>
</td></tr></table>
        </div>
    </div>
</div>
</body>
</html>